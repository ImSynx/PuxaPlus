{% extends "main_layout.html" %}

{% block title %}Desafios de treino • Puxa+{% endblock %}

{% block page_content %}
  <div class="space-y-8">
    <h1 class="text-4xl font-bold text-center">Desafios de Treino</h1>
    
    <!-- Desafios Diários -->
    <div class="max-w-3xl mx-auto">
      <h2 class="text-2xl font-semibold mb-4">Desafios Diários</h2>
      {% if daily_challenges %}
        <div class="space-y-3 mb-8">
          {% for challenge in daily_challenges %}
            <div class="bg-white border border-gray-200 rounded-lg p-4 {% if challenge.id in completed_daily_ids %}bg-green-50 border-green-300{% endif %}">
              <div class="flex items-start justify-between gap-4">
                <div class="flex-1">
                  <div class="flex items-center gap-3 mb-2">
                    <h3 class="text-lg font-semibold">{{ challenge.title }}</h3>
                    {% if challenge.id in completed_daily_ids %}
                      <span class="bg-green-500 text-white text-xs font-bold px-2 py-1 rounded-full">
                        ✓ Completado
                      </span>
                    {% endif %}
                  </div>
                  <p class="text-gray-600 mb-2">{{ challenge.description }}</p>
                  <p class="text-sm text-gray-500">Recompensa: {{ challenge.points_reward }} ponto(s)</p>
                </div>
                {% if challenge.id not in completed_daily_ids %}
                  <form method="POST" action="{{ url_for('complete_challenge', challenge_id=challenge.id) }}" class="flex-shrink-0">
                    <button
                      type="submit"
                      class="bg-black text-white px-6 py-2 rounded-lg hover:bg-gray-800 transition-colors font-semibold"
                    >
                      Completar
                    </button>
                  </form>
                {% else %}
                  <div class="flex-shrink-0 text-green-600">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <polyline points="20 6 9 17 4 12"></polyline>
                    </svg>
                  </div>
                {% endif %}
              </div>
            </div>
          {% endfor %}
        </div>
      {% else %}
        <div class="bg-white border border-gray-200 rounded-lg p-8 text-center mb-8">
          <p class="text-gray-500">Não há desafios diários disponíveis no momento.</p>
        </div>
      {% endif %}
    </div>

    <!-- Desafios Semanais -->
    <div class="max-w-3xl mx-auto">
      <h2 class="text-2xl font-semibold mb-4">Desafios Semanais</h2>
      {% if weekly_challenges %}
        <div class="space-y-3">
          {% for challenge in weekly_challenges %}
            <div class="bg-white border border-gray-200 rounded-lg p-4 {% if challenge.id in completed_weekly_ids %}bg-green-50 border-green-300{% endif %}">
              <div class="flex items-start justify-between gap-4">
                <div class="flex-1">
                  <div class="flex items-center gap-3 mb-2">
                    <h3 class="text-lg font-semibold">{{ challenge.title }}</h3>
                    {% if challenge.id in completed_weekly_ids %}
                      <span class="bg-green-500 text-white text-xs font-bold px-2 py-1 rounded-full">
                        ✓ Completado
                      </span>
                    {% endif %}
                  </div>
                  <p class="text-gray-600 mb-2">{{ challenge.description }}</p>
                  <p class="text-sm text-gray-500">Recompensa: {{ challenge.points_reward }} ponto(s)</p>
                </div>
                {% if challenge.id not in completed_weekly_ids %}
                  <form method="POST" action="{{ url_for('complete_challenge', challenge_id=challenge.id) }}" class="flex-shrink-0">
                    <button
                      type="submit"
                      class="bg-black text-white px-6 py-2 rounded-lg hover:bg-gray-800 transition-colors font-semibold"
                    >
                      Completar
                    </button>
                  </form>
                {% else %}
                  <div class="flex-shrink-0 text-green-600">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <polyline points="20 6 9 17 4 12"></polyline>
                    </svg>
                  </div>
                {% endif %}
              </div>
            </div>
          {% endfor %}
        </div>
      {% else %}
        <div class="bg-white border border-gray-200 rounded-lg p-8 text-center">
          <p class="text-gray-500">Não há desafios semanais disponíveis no momento.</p>
        </div>
      {% endif %}
    </div>
  </div>
{% endblock %}
